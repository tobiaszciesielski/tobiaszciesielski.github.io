---
const posts = await getCollection('blog')

import { getCollection } from 'astro:content'
import Layout from '../../layouts/Layout.astro'
import { formatDate } from '../../utils/date'

const sortedPosts = posts.sort(
  (a, b) => a.data.publicationDate.getTime() - b.data.publicationDate.getTime()
)
---

<Layout title="Blog • Tobiasz.Dev">
  <h1 class="text-3xl tracking-wider mb-10">Blog ✍️</h1>

  <ul class="flex flex-col gap-5">
    {
      sortedPosts.reverse().map((post) => (
        <li>
          <a href={`/blog/${post.slug}`}>
            <div class="hover:underline text-lg">{post.data.title}</div>
            <div class="text-xs">
              {formatDate(post.data.publicationDate, 'long')}
            </div>
          </a>
        </li>
      ))
    }
  </ul>
</Layout>
