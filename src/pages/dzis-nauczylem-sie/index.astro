---
import { getCollection } from 'astro:content'
import Layout from '../../layouts/Layout.astro'

let lessons = await getCollection('todayILearned')

lessons = lessons.sort(
  (a, b) => a.data.publicationDate.getTime() - b.data.publicationDate.getTime()
)

const formatDate = (date: Date) =>
  new Date(date).toLocaleDateString('pl-PL', {
    year: 'numeric',
    month: 'numeric',
    day: 'numeric',
  })
---

<Layout title="DziÅ› NauczyÅ‚em SiÄ™ â€¢ Tobiasz Ciesielski">
  <h1 class="text-3xl tracking-wider mb-10">DziÅ› nauczyÅ‚em siÄ™ ğŸ‘¨â€ğŸ«</h1>

  <p class="mb-4">
    ChcÄ™Â pokazaÄ‡Â jak wyglÄ…dajÄ… realne problemy, ktÃ³re rozwiÄ…zujÄ™Â na codzieÅ„ w
    pracy. Czasami sÄ… to teÅ¼ maÅ‚e snippety kodu, ktÃ³re nie chcÄ™, Å¼eby mi
    zginÄ™Å‚y.
  </p>

  <p class="mb-8">
    Licznik krÃ³tkich lekcji wskazuje na <b class="text-lg">
      {lessons.length}
    </b> i nadal siÄ™ uczÄ™ ğŸ§ 
  </p>

  <ul class="flex flex-col gap-3">
    {
      lessons.reverse().map((lesson) => (
        <li>
          <a href={`/dzis-nauczylem-sie/${lesson.slug}`}>
            <div class="flex gap-3 items-top">
              <div class="text-slate-600">
                {formatDate(lesson.data.publicationDate)}
              </div>
              <div class="hover:underline ">{lesson.data.title}</div>
            </div>
          </a>
        </li>
      ))
    }
  </ul>
</Layout>
